---
name: proofread-consistency
description: 章間の矛盾・用語の定義の一貫性を検証する校閲スキル
triggers:
  - "整合性チェックして"
  - "/proofread-consistency"
---

# 整合性校閲スキル

## 役割

書籍全体を通じた一貫性を検証し、章間の矛盾、用語定義のブレ、説明の食い違いを検出します。

**対象**: 書籍全体、複数章にまたがるドキュメント

## 検証対象

### 1. 用語定義の一貫性

#### 検証項目

| 項目 | 問題パターン | 例 |
| --- | --- | --- |
| 定義のブレ | 同一用語に異なる定義 | 「仕様」が章によって範囲が違う |
| 初出定義の欠如 | 定義なしに使用 | 専門用語を突然使用 |
| 定義の矛盾 | 相反する定義 | 「Aを含む」「Aを含まない」 |

#### 検証方法

1. **用語の初出箇所を特定**: 各章で新出の専門用語を抽出
2. **定義の比較**: 同一用語が異なる箇所でどう定義されているか比較
3. **一貫性の確認**: 定義が統一されているか確認

```yaml
用語定義の追跡例:
  term: "AI仕様駆動開発"
  definitions:
    - chapter: "序章"
      definition: "AIに渡す仕様を中心とした開発手法"
      line: 45
    - chapter: "第3章"
      definition: "仕様文書を7種類に体系化したアプローチ"
      line: 230
  status: "一貫" or "要確認"
```

### 2. 章間の整合性

#### 検証項目

| 項目 | 問題パターン | 影響 |
| --- | --- | --- |
| 数値の不一致 | 第1章「7文書」→第3章「6文書」 | 読者の混乱 |
| 手順の不一致 | 章により手順が異なる | 再現性の低下 |
| 事例の矛盾 | 同じ事例で異なる結果 | 信頼性の低下 |
| 参照の不整合 | 「前章で述べた」が存在しない | 読者の混乱 |

#### 検証方法

1. **クロスリファレンスの確認**: 「前章」「後述」などの参照が正確か
2. **数値の照合**: 章間で言及される数値が一致するか
3. **事例の追跡**: 繰り返し登場する事例が一貫しているか

### 3. 概念の進化と整合

#### 検証項目

書籍内で概念が「導入→詳細→応用」と進化する場合:

| 段階 | 確認事項 |
| --- | --- |
| 導入 | 基本定義が明確か |
| 詳細 | 導入時の定義と矛盾しないか |
| 応用 | 詳細説明と整合しているか |

#### 問題パターン

```
🔴 重大: 定義の矛盾
  第1章: 「AIに渡す情報は最小限に」
  第5章: 「AIには詳細な情報を提供すべき」
  → どちらが正しいか不明確

🟡 警告: 暗黙の前提変化
  第2章: 「小規模プロジェクトを想定」
  第4章: 「大規模プロジェクトでは...」（切り替わりが不明確）
```

### 4. 構造的整合性

#### 検証項目

| 項目 | 確認事項 |
| --- | --- |
| 章構成の一貫性 | 各章の構成パターンが統一されているか |
| レベルの整合 | 同レベルの見出しが同程度の粒度か |
| 導入と結論の対応 | 章の冒頭で述べた内容が結論で回収されているか |

#### パターン例

```
期待されるパターン:
  第X章
  ├── 導入（章の目的・この章で学ぶこと）
  ├── 本文（2-4セクション）
  └── まとめ（要点の振り返り）

検証: 各章がこのパターンに従っているか
```

### 5. 時系列の整合性

#### 検証項目

| 項目 | 問題パターン | 例 |
| --- | --- | --- |
| 順序の矛盾 | ステップの順序が章により異なる | 「まずA」「最初にB」 |
| 前提の不成立 | 後の章の内容を前の章で参照 | 第2章で第5章の内容を前提 |
| バージョンの混在 | 異なる時期の情報が混在 | 古い仕様と新しい仕様 |

## 検証プロセス

### ステップ1: 全体構造の把握

```
書籍構造マップ:
├── 序章: 導入、用語定義
├── 第1部: 問題提起
│   ├── 第1章: パターンA定義
│   └── 第2章: パターンB定義
├── 第2部: 解決策
│   ├── 第3章: 7文書体系
│   └── 第4章: 実践方法
└── 第3部: 応用
    └── 第5章: チーム展開
```

### ステップ2: 要素の追跡

追跡すべき要素:
1. **用語**: 専門用語の定義と使用
2. **数値**: 具体的な数字（文書数、行数など）
3. **事例**: 繰り返し登場する例
4. **概念**: コア概念の説明

### ステップ3: 整合性チェック

各要素について:
1. 初出箇所を特定
2. 再出箇所をすべて収集
3. 一貫性を検証
4. 不一致を報告

## 出力形式

```markdown
### 整合性校閲結果

#### サマリー
- 検証した章: X章
- 追跡した用語: X個
- 🔴 重大な不整合: X件
- 🟡 確認推奨: X件
- ✅ 整合確認済み: X件

---

#### 🔴 重大な不整合

1. **用語定義の矛盾**: 「7文書体系」
   - 第2章（行145）: 「7つの文書で構成」
   - 第4章（行78）: 「6つの主要文書」
   - 問題: 文書数が章により異なる
   - 推奨: 正しい数に統一、または違いを明確に説明

2. **クロスリファレンスの不整合**
   - 第5章（行203）: 「第3章で述べたワークフロー」
   - 問題: 第3章にワークフローの記述が見当たらない
   - 推奨: 参照先を確認、第4章の可能性

---

#### 🟡 確認推奨

1. **概念の進化**
   - 用語: 「コンテキスト」
   - 第1章: 「AIに渡す情報全体」
   - 第3章: 「プロジェクトの背景情報」
   - 問題: 定義の範囲が異なる可能性
   - 推奨: 意図的な使い分けなら明示、そうでなければ統一

2. **暗黙の前提変化**
   - 第1-2章: 個人開発を想定
   - 第5章: チーム開発を想定
   - 問題: 切り替わりが明示されていない
   - 推奨: 第5章冒頭で「ここからはチーム開発を想定」と明記

---

#### ✅ 整合確認済み

1. **7文書の名称**: 全章で統一されている
   - MASTER.md, PROJECT.md, ARCHITECTURE.md...
   - 初出: 第2章（行89）
   - 再出: 第3章（行45）、第4章（行120）、第5章（行67）
   - 判定: ✅ 完全一致

2. **「70%問題」の説明**: 一貫している
   - 定義: 「AIに大きなタスクを任せると70%程度で止まる現象」
   - 使用箇所: 第1章、第2章、第5章
   - 判定: ✅ 定義と使用が一貫
```

## 整合性マトリクス

複数章を俯瞰するためのマトリクス形式:

```markdown
| 要素 | 第1章 | 第2章 | 第3章 | 第4章 | 第5章 | 判定 |
|------|-------|-------|-------|-------|-------|------|
| 7文書体系 | 言及 | 定義 | 詳細 | 実践 | 応用 | ✅ |
| 70%問題 | 定義 | 参照 | - | 参照 | 参照 | ✅ |
| ワークフロー | - | - | - | 定義 | 参照 | 🟡 |
| コンテキスト | 使用 | 定義A | 定義B | 使用 | 使用 | 🔴 |
```

## チェックリスト

検証時に確認すべき項目:

- [ ] 専門用語の定義が全章で統一されているか
- [ ] 章間で言及される数値が一致するか
- [ ] 「前章」「後述」などの参照が正確か
- [ ] 同じ事例が章により異なる説明になっていないか
- [ ] 概念の導入→詳細→応用の流れが一貫しているか
- [ ] 各章の構成パターンが統一されているか
- [ ] 対象読者の前提が章により変わっていないか
