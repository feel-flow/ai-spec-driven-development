---
name: proofread-structure
description: 章のフォーマット・構造が規定に準拠しているかチェックするスキル
triggers:
  - "構造チェックして"
  - "/proofread-structure"
---

# 章構造検証スキル

## 役割

章のフォーマットが書籍の規定構造に準拠しているかを検証します。

## 基準構造（本プロジェクトの章パターン）

### 章の必須要素

以下の順序で必須要素が含まれているかを検証します：

```markdown
# 第X-X章　[章タイトル]

## X.X　[セクション名]

[本文]

---

## X.X　[次のセクション名]

[本文]

---

（繰り返し）

---

## X.XX　章末チェックリスト（任意）

- [ ] [確認項目1]
- [ ] [確認項目2]

---

<div class="column-box">

### 🎼 コラム：[コラムタイトル]（任意）

[コラム内容]

**AI侍**: 「[セリフ]」
**DJ町娘**: 「[セリフ]」

</div>
```

**注意**:
- セクション番号は章番号に合わせる（例：第5-1章なら `## 5.1　`、`## 5.2　`...）
- コラムは章末に配置し、AI侍とDJ町娘の対話を含めることが多い
- 番号なしセクション（`## セクション名`）も許容される

### 部の扉ページ構造

```markdown
![第X部：タイトル](../images/partX-*.jpeg)

**［第X部］** [部の概要説明]

---

# 第X章　[最初の章タイトル]
```

## 検証項目

### 1. 必須セクションの存在チェック

| セクション | 必須 | パターン |
| --- | --- | --- |
| 章タイトル | ✅ | `# 第X-X章　` または `# 第X章　` で始まる |
| 本文セクション | ✅ | `## ` で始まるセクションが1つ以上 |
| 章末チェックリスト | 任意 | `## 章末チェックリスト` または `## X.XX　章末チェックリスト` |
| コラム | 任意 | `<div class="column-box">` |
| 脚注 | 任意 | `[^1]:` など |
| 画像生成プロンプト | 任意 | `## 画像生成プロンプト` |

### 2. チェックリストの検証（存在する場合）

- 形式：`- [ ]` 形式であること
- 項目数：3〜6個が適切
- 内容：動詞で終わる行動可能な項目

```text
🔴 悪い例：
- AIの活用
- [ ] 理解

✅ 良い例：
- [ ] 最近のPRサイズを確認し、200行を超えているものを特定する
- [ ] 仕様がチャットログにしか残っていないケースを洗い出す
```

### 3. 見出しレベルの検証

#### 許可される見出し構造

```text
# H1 - 章タイトル（1つのみ）
## H2 - メインセクション
### H3 - サブセクション
#### H4 - 細分化（任意）
```

#### 検出すべき問題

- H1が複数存在する
- H2→H4の飛び越し（H3をスキップ）
- H1→H3の飛び越し（H2をスキップ）

```text
🔴 悪い例：
# 第1-1章　タイトル
## セクション1
#### 詳細  ← H3をスキップしている

✅ 良い例：
# 第1-1章　タイトル
## セクション1
### サブセクション
#### 詳細
```

### 4. セクション順序の検証

正しい順序：

1. 章タイトル（`# 第X-X章` または `# 第X章`）
2. 本文セクション（複数の `## X.X　` / `###`）
3. 各セクション間に区切り線（`---`）
4. （任意）章末チェックリスト（`## 章末チェックリスト` または `## X.XX　章末チェックリスト`）
5. 区切り線（`---`）
6. （任意）コラム（`<div class="column-box">`）
7. （任意）脚注（`[^1]: ...`）
8. （任意）画像生成プロンプト（`## 画像生成プロンプト`）

### 5. 区切り線の検証

- `---` の前後に空行があること
- 主要セクション間に区切り線があること

```text
🔴 悪い例：
テキスト
---
次のセクション

✅ 良い例：
テキスト

---

次のセクション
```

### 6. コラムの検証（存在する場合）

- `<div class="column-box">` と `</div>` で囲まれていること
- コラムタイトルは `### 🎼 コラム：` または `### 📂 コラム：` などの絵文字付き見出し
- AI侍とDJ町娘の対話がある場合は `**AI侍**:` と `**DJ町娘**:` の形式

```text
✅ 良い例：
<div class="column-box">

### 🎼 コラム：指揮者とオーケストラ

[コラム本文]

**AI侍**: 「指揮者は楽器を弾かない。でも、指揮者なくして演奏は成り立たぬ」
**DJ町娘**: 「人間が全体を見て、AIがそれぞれを実行する...まさに理想の協働ですね🎵」

</div>
```

## 出力形式

```markdown
### 構造検証結果

#### 必須要素チェック

| 要素 | 状態 | 備考 |
| --- | --- | --- |
| 章タイトル | ✅ / 🔴 | [詳細] |
| 本文セクション | ✅ / 🔴 | [セクション数: N個] |

#### 任意要素チェック

| 要素 | 状態 | 備考 |
| --- | --- | --- |
| チェックリスト | ✅ / ⚪ | [項目数: N個] |
| コラム | ✅ / ⚪ | [AI侍対話: あり/なし] |

#### 🔴 構造の問題

1. **[行XX]** 見出しレベルの飛び越し
   - 現在: `## セクション` → `#### 詳細`
   - 推奨: `### サブセクション` を間に追加

#### 🟡 構造の警告

1. **チェックリスト形式**: 行XX
   - 現在: `- 確認項目`
   - 推奨: `- [ ] 確認項目`

2. **コラムのdivタグ**: 行XX
   - 現在: `</div>` が閉じられていない
   - 推奨: コラム終端に `</div>` を追加

#### ✅ 構造OK

- 見出しレベルの構造は正常です
- セクション順序は正しいです
```

## ファイルタイプ別の検証

### 章ファイル（01-1_*.md, 02-1_*.md, ...）

- 章タイトルと本文セクションの必須要素を検証
- チェックリスト・コラムは任意

### 序文・前書き（00_preface.md）

- チェックリスト・コラムは不要
- 見出し構造のみ検証

### 目次（00_toc.md）

- 構造検証をスキップ
- リンクの有効性のみ検証

### 部の扉ページ

- 画像参照の存在確認
- 部の説明テキストの存在確認

### 付録・あとがき（appendix_*.md, 99_afterword.md）

- 章番号なしの見出しを許容
- 構造は柔軟（チェックリスト・コラムなしでOK）

## チェックリスト

検証時に確認すべき項目：

- [ ] 章タイトルが `# 第X-X章　` または `# 第X章　` で始まるか
- [ ] 本文セクション（`## `）が1つ以上あるか
- [ ] 見出しレベルの飛び越しがないか
- [ ] 区切り線の前後に空行があるか
- [ ] チェックリストがある場合、`- [ ]` 形式になっているか
- [ ] コラムがある場合、`<div class="column-box">` と `</div>` で囲まれているか
- [ ] コラム内のAI侍・DJ町娘の対話形式が正しいか（`**AI侍**:`, `**DJ町娘**:`）
