# 5-1　ファイル整理の技術──AIが扱いやすい情報のまとめ方

## ◼︎導入：Chatから実務へ

### ここまでの振り返り

第1〜4部では、AIとの「会話」の仕方を学びました。

- **第1部**：大きすぎるお願いは精度が下がる（70%問題）
- **第2部**：長い入力は中間・最初を忘れる（Lost in the Middle / Lost at the Beginning）
- **第3部**：精度が欲しい時は細かく指示する（精度モード）
- **第4部**：推論が欲しい時は余白を残す（推論モード）

これらは主に**ChatGPTやClaudeとの対話**を想定した話でした。

### 実務では「ファイル」を扱う

しかし、実際の業務では、AIに「会話」だけでなく**ファイルを渡して作業を依頼**します。

- 議事録を要約してもらう
- 企画書をレビューしてもらう
- マニュアルを更新してもらう

このとき、**どんなファイルを、どう渡すか**が精度を左右します。

### コンテキストエンジニアリングという考え方

最近、「**コンテキストエンジニアリング**」という言葉が使われ始めています。

これは、AIに渡す情報（コンテキスト）を**設計・管理する技術**です。

- どのファイルを渡すか
- どのくらいのサイズに分けるか
- どの順序で渡すか

本章では、この**コンテキストエンジニアリング**の視点から「ファイル整理」を考えていきます。

---

## ◼︎コンテキストウィンドウの基本──AIが一度に扱える量

### トークンとは

AIは文章を「**トークン**」という単位で処理します。

| 言語 | 1トークンの目安 |
|-----|---------------|
| 英語 | 約4文字（1単語程度） |
| 日本語 | 約0.5〜1文字 |

日本語は英語より「効率が悪い」のです。同じ内容でも、日本語の方がトークン数が多くなります。

### 各AIのコンテキスト上限※

| サービス | 上限（目安） | 日本語換算 |
|---------|------------|-----------|
| Gemini 3 Pro | 100万トークン | 50〜100万文字 |
| ChatGPT（GPT-5.2） | 40万トークン | 20〜40万文字 |
| Claude Sonnet 4.5 | 20万トークン | 10〜20万文字 |

※2026年1月時点。各サービスの最新情報をご確認ください。上位プランではさらに大きなコンテキストが利用可能な場合があります（Claude Sonnet 4.5は最大100万トークン、GPT-5.2は最大40万トークン）。

### 「入る」と「処理できる」は違う

重要なのは、**上限いっぱいまで入れても、精度が下がる**ということです。

第2部で学んだ問題を思い出してください：

- **Lost in the Middle**（2-1）：即答型AIは長い入力の**中間部分を忘れやすい**
- **Lost at the Beginning**（2-2）：熟考型AIは**最初の情報を軽視しやすい**

つまり、「入る」ことと「正確に処理できる」ことは別なのです。

### だから「小さく分ける」

1000行のファイルを1つ渡すより、100行×10個のファイルから**必要なものだけ選んで渡す**方が、AIは正確に処理できます。

これが、ファイル整理の本質です。

---

## ◼︎テキストファイルの基本──AIが読める形式

### なぜテキストデータが重要か

AIは**テキスト**を「読んで」処理します。

画像やPDFを渡すと、AIはまず「文字起こし」をしてから処理します。この変換過程で情報が失われることがあります。

**最初からテキストで渡せば、精度が上がる**のです。

| 形式 | AIの処理 | 精度 |
|-----|---------|------|
| テキストファイル | そのまま読む | 高い |
| Word/Excel | 変換してから読む | やや低い |
| PDF | 変換してから読む | やや低い |
| 画像（スキャン） | OCRで文字起こし | 低い |

### Markdown形式とは

**Markdown**（マークダウン）は、シンプルな記法で文書の構造を表現できる形式です。

```markdown
# 見出し1
## 見出し2
### 見出し3

- 箇条書き1
- 箇条書き2

**太字**で強調

1. 番号付きリスト
2. 番号付きリスト
```

この本も、Markdown形式で書かれています。

**Markdownの利点**：
- 見た目を気にせず、**内容に集中**できる
- AIが**構造を理解しやすい**
- どんなテキストエディタでも開ける
- バージョン管理がしやすい

### Word/Excelとの違い

| | Word/Excel | テキスト（Markdown） |
|---|-----------|------------------|
| 見た目 | 重視 | 最小限 |
| ファイルサイズ | 大きい | 小さい |
| AIへの渡しやすさ | 変換が必要 | そのまま |
| 編集ツール | 専用ソフト | 何でもOK |

「見た目を整える」より「内容を整理する」方が、AIとの作業では重要です。

---

## ◼︎VS Code入門──AIと連携できるファイル管理ツール

### VS Codeとは

**VS Code**（Visual Studio Code）は、Microsoftが作った**無料のテキストエディタ**です。

「プログラマー向けのツールでしょ？」と思われがちですが、実は**誰でも使えるファイル管理ツール**として優れています。

**VS Codeでできること**：
- フォルダを開いて、中のファイルを一覧表示
- テキストファイル（Markdown含む）の編集
- 複数ファイルの同時編集
- **AIとの連携**（Claude Code、GitHub Copilotなど）

### なぜAI時代にVS Codeが便利か

現在、AIと連携できるファイル管理ツールは限られています。VS Codeは、その中で最も充実した環境を提供しています。

**AIツールとの連携**：
- **Claude Code**：@ファイル名でファイルを参照できる
- **GitHub Copilot**：コードの補完と提案
- **Cursor**：AIファーストのエディタ（VS Codeベース）

これらのツールは、VS Codeのフォルダ構造を理解して、必要なファイルだけを参照できます。

### インストール方法

1. [code.visualstudio.com](https://code.visualstudio.com/) からダウンロード
2. インストーラーを実行
3. 日本語化：拡張機能から「Japanese Language Pack」をインストール

### 最初の一歩

1. VS Codeを起動
2. 「フォルダーを開く」で作業フォルダを選択
3. 左側のエクスプローラーでファイル一覧を確認
4. 新規ファイル作成（右クリック→「新しいファイル」）

**ポイント**：VS Codeは「フォルダ単位」で作業します。まずフォルダを開くことから始めましょう。

---

## ◼︎ファイルサイズの重要性──大きいファイルが良くない理由

### なぜ大きいファイルが問題か

5.2で説明したように、AIには以下の弱点があります：

- **Lost in the Middle**：長い入力の中間部分を忘れやすい
- **Lost at the Beginning**：最初の情報を軽視しやすい

ファイルが大きいと、これらの問題が発生しやすくなります。

### 1ファイルの目安

経験則として、**1ファイル500行以下**がAIとの作業に適したサイズです。

| ファイルサイズ | AI精度 | 目安 |
|--------------|--------|------|
| 〜200行 | 非常に高い | A4で2枚程度 |
| 200〜500行 | 高い | A4で5枚程度 |
| 500〜800行 | やや低下 | A4で8枚程度 |
| 800行〜 | 低下 | それ以上 |

業務文書なら**「A4で5枚程度」**が目安になります。

### 大きくなったら分割するサイン

以下のような状況になったら、ファイルを分割するタイミングです：

- **スクロールが多くなった**
  - 「あの部分どこだっけ？」と探すことが増えた

- **複数のテーマが混在している**
  - 1つのファイルに「会議記録」と「タスク一覧」と「参考資料」が入っている

- **AIに渡すと中間が無視される**
  - 「ここも読んでほしかったのに」と思うことが増えた

---

## ◼︎分割の基本原則──1ファイル = 1テーマ

### 「買い物袋」の比喩

1-1のコラムで「買い物袋」の話をしました。

1つの袋に全部詰め込むと：
- 重くて持てない
- 卵が割れる
- 欲しいものが見つからない

ファイルも同じです。

**1ファイル = 1テーマ**にすれば：
- 必要な情報だけを渡せる
- AIが迷わない
- 修正も楽

### 業務ファイルの分割例

#### 議事録の場合

**Before**（すべて1ファイル）：
```text
meeting_notes.md
├── 2024年1月の会議（500行）
├── 2024年2月の会議（400行）
├── 2024年3月の会議（600行）
└── 合計1500行 → AIが中間を忘れる
```

**After**（会議ごとに分割）：
```text
meetings/
├── 2024-01_monthly.md（500行）
├── 2024-02_monthly.md（400行）
└── 2024-03_monthly.md（600行）
```

AIに「3月の会議について確認して」と頼むとき、3月のファイルだけを渡せます。

#### 企画書の場合

**Before**（1つの長い文書）：
```text
企画書.md
├── 背景・課題
├── 解決策
├── スケジュール
├── 予算
├── リスク
└── 合計800行 → 長すぎ
```

**After**（セクションごとに分割、または構造化）：
```text
proposal/
├── 01_background.md（背景・課題）
├── 02_solution.md（解決策）
├── 03_schedule.md（スケジュール）
├── 04_budget.md（予算）
└── 05_risk.md（リスク）
```

または、1ファイルのまま500行以内に収まるなら、見出しで構造化するだけでもOKです。

#### マニュアルの場合

**Before**：
```text
操作マニュアル.md（2000行）
```

**After**：
```text
manual/
├── 01_getting_started.md（はじめに）
├── 02_basic_operations.md（基本操作）
├── 03_advanced.md（応用機能）
└── 04_troubleshooting.md（トラブル対応）
```

### 分割しすぎない

分割しすぎると、今度は「情報が分散しすぎて、必要な情報を伝えにくい」という問題が発生します。

**分割しすぎのサイン**：
- 1つの作業で3ファイル以上を開く必要がある
- 分割後のファイルが50行以下になる
- 「あのファイルとこのファイルは常にセットで見る」状態

**バランスのポイント**：
- 一緒に変更される情報は、同じファイルに置く
- 独立して変更される情報は、別ファイルに分ける

---

## ◼︎AIへの渡し方──効果的なファイル参照

### 「全体像」を先に伝える

AIにファイルを渡す前に、プロジェクトの全体像を伝えると精度が上がります。

```text
【効果的な伝え方】

このフォルダには、新製品企画のドキュメントが入っています。
構成は以下の通りです：

proposal/
├── 01_background.md → 背景・課題
├── 02_solution.md   → 解決策
├── 03_schedule.md   → スケジュール
└── 04_budget.md     → 予算

今から「02_solution.md」の内容を確認してください。
このファイルは、課題に対する解決策を説明しています。
```

**なぜ効果的か**：
- AIが「このファイルの役割」を理解できる
- 他のファイルとの関係がわかる
- 文脈を踏まえた回答ができる

### 渡すファイルは3〜5個まで

1つのファイルだけでは情報が足りない場合、関連ファイルも渡します。

ただし、**渡しすぎないことが重要**です。

**推奨**：
```text
02_solution.md について確認してください。

関連ファイル：
- 01_background.md（背景情報）
```

**非推奨**：
```text
02_solution.md について確認してください。

関連ファイル：
- 01_background.md
- 03_schedule.md
- 04_budget.md
- 過去の企画書10個
- 参考資料20個
→ 多すぎてAIの弱点が発生（中間忘却）
```

**目安**：
- 渡すファイルは**3〜5個まで**
- 本当に必要なファイルだけを選ぶ
- 迷ったら「このファイルがないと作業できないか？」で判断

### @参照の使い方（VS Code + Claude Code）

VS Code + Claude Code では、`@ファイル名` でファイルを参照できます。

```text
@proposal/02_solution.md の内容を要約してください。
参考: @proposal/01_background.md
```

この機能を効果的に使うコツ：

1. **必要なファイルだけを参照する**
2. **参照の順序を意識する**（メインのファイルを最初に）
3. **参照理由を明記する**（「参考:」「背景情報:」など）

---

## ◼︎【コラム】AIにファイル整理を手伝ってもらう

<div class="column-box">

### 📂 コラム：AIにファイル整理を手伝ってもらう

本書の「小さく分ける」とは少し違う使い方ですが、AIは「ファイルの整理」そのものも手伝ってくれます。

**フォルダ分けの提案をもらう**：
```text
このフォルダにあるファイル一覧から、
整理案を提案してください。

- 報告書_2024年1月.docx
- 報告書_2024年2月.docx
- 議事録_営業会議.md
- 議事録_開発会議.md
- 参考資料_競合分析.pdf
- 参考資料_市場調査.pdf
```

**ファイル名の命名規則を作る**：
```text
議事録のファイル名ルールを提案してください。
以下の条件を満たしたいです：
- 日付がわかる
- 会議の種類がわかる
- 時系列で並ぶ
```

これは「AIに実行させる」というより「**AIに提案してもらう**」使い方です。第4部で学んだ「推論モード」の応用ですね。

**AI侍**: 「整理の仕方を考えてもらうのも、立派なAI活用じゃ」
**DJ町娘**: 「自分で全部考えなくていいんですね！」

</div>

---

## ◼︎【補足】システム開発での応用

### 開発者向けの内容

ここからは、システム開発者向けの補足です。業務ファイル整理の原則は、コードにもそのまま当てはまります。

### ファイル分割の3つの軸

開発プロジェクトでは、主に3つの軸でファイルを分割します：

**1. 機能単位で分ける**
```text
features/
├── authentication/（認証機能）
├── payment/（決済機能）
└── notification/（通知機能）
```

**2. レイヤー単位で分ける**
```text
src/
├── domain/（ビジネスロジック）
├── application/（ユースケース）
├── infrastructure/（外部連携）
└── presentation/（UI/API）
```

**3. ドメイン単位で分ける**
```text
src/
├── user/（ユーザードメイン）
├── order/（注文ドメイン）
└── payment/（決済ドメイン）
```

### プロンプトの書き方

**悪い例**：
```text
認証機能を改善してください。
```

**良い例**：
```text
@src/auth/login.ts の login関数に以下の修正を加えてください：
1. ログイン試行回数のチェックを追加
2. 5回失敗したら15分間ロック
3. 成功したらカウンターをリセット

参考: @src/utils/rate-limiter.ts
```

開発での詳しい活用方法は、姉妹編「AI仕様駆動開発」で解説しています。

---

## ◼︎この本の壁打ち例（メタ＝裏話）

### この本はAIとの壁打ちで生まれた

実は、この本自体がAI（Claude）との壁打ちで執筆されています。ここでは、その裏話を紹介します。

### 章構成の決め方

本書の章構成は、以下のようなAIとの対話で決まりました。

```markdown
【人間の最初のお願い】
AIを使うのがうまくいかない理由と、うまく使うコツを
本にまとめたいと思っています。構成を考えてください。

【AIの提案】
（複数の構成案を提示）

【人間の壁打ち】
「なんか違う」と感じた部分を具体的にフィードバック：
- 「第3部と第4部の対比がわかりにくい」
- 「AIの弱点は重要なので独立した章に」
- 「実践編が欲しい」

【AIの修正案】
（フィードバックを反映した構成案）

【繰り返し】
3〜4回のやり取りで、現在の6部構成に
```

**ポイント**：
- 一度で完璧を求めなかった
- 「なんか違う」を具体化して伝えた
- AIの提案を叩き台にして、人間が判断した

### 用語の統一方法

本書では、用語統一のために `terminology.yaml` を作成しています。

```yaml
# terminology.yaml（抜粋）
core_concepts:
  - standard: "70%問題"
    variants:
      - "70%の完成度"
      - "七割問題"
    description: "AIに大きなタスクを丸投げすると、
                  約70%の完成度で止まってしまう現象"

  - standard: "Lost in the Middle"
    variants:
      - "Lost in the Middle問題"
      - "ロスト・イン・ザ・ミドル"
    description: "即答型AIが長い入力の中間部分を忘れやすい問題"
```

この用語集は、以下の手順で作成しました：

1. **AIに本文から用語を抽出させる**
2. **人間が確認・修正**
3. **AIに用語集を使って校正させる**

### 校正プロセス

本書の校正は、二段階AI活用パターン（3-2）を実践しています。

```markdown
【第一段階：AIにチェックリストを作らせる】
人間: この章を校正するためのチェックリストを作ってください。

AI: 以下の観点でチェックします：
1. 日本語表現（誤字脱字、文法）
2. 用語統一（terminology.yaml準拠）
3. 章構造（必須セクションの有無）
4. Markdown形式（コードブロック、リンク）
5. ファクトチェック（引用の正確性）

【第二段階：チェックリストで人間が検証】
人間: AIの指摘を確認し、実際に修正が必要か判断
```

**この方法のメリット**：
- AIの「見落とし」を人間がカバー
- AIの「過剰な指摘」を人間がフィルタリング
- 最終判断は人間が行う

### ファイル分割の実践

本書自体も、ファイル分割の原則に従っています。

```text
books/ai-small-is-accurate/
├── 00_toc.md                     (目次)
├── 00_preface.md                 (まえがき)
├── part1_why-ai-fails/
│   ├── 01-1_the-seventy-percent-problem.md
│   └── 01-2_hidden-costs-and-solutions.md
├── part2_context-limit/
│   ├── 02-1_lost-in-the-middle.md
│   └── 02-2_lost-at-the-beginning.md
├── part3_precision/
│   ├── 03-1_scope-convergence.md
│   └── 03-2_two-stage-ai.md
├── part4_inference/
│   └── 04-1_leave-room-for-thinking.md
├── part5_vscode/
│   └── 05-1_practical-tips.md（この章）
├── part6_new-roles/
│   └── 06-1_human-as-divider.md
└── appendix_quick-reference.md
```

**分割のポイント**：
- 各章は500〜800行に収める
- 長くなった第1章は01-1と01-2に分割
- 部（Part）ごとにディレクトリを分ける
- AIに「この章を校正して」と渡しやすいサイズ

---

## まとめ

この章では、AIと協働するための「情報整理術」を学びました。

**ファイル整理の原則**: 1ファイル＝1テーマ、500行以下、内容が推測できるファイル名。関連情報は近くに配置する。

**AIへの渡し方**: 全体像を先に伝え、渡すファイルは3〜5個以内に。参照理由を明記し、指示は具体的で小さく。

**Markdown活用**: テキスト形式で保存し、見出し（#）で構造を整理。箇条書きで情報を整える。

これらを意識するだけで、AIの理解度と出力精度が大きく変わります。

---

<div class="column-box">

### 🧰 コラム：職人の道具箱

![職人の道具箱](./images/05-1_toolbox_4koma.png)

</div>
