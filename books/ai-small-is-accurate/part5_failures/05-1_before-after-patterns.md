# 第5-1章　Before/After──失敗パターンと解決策

## なぜ失敗パターンを学ぶのか

ここまで、AIを使いこなすための
様々な概念を学んできました。

- 70%問題（第1部）
- AIの2つの弱点：Lost in the Middle / Lost at the Beginning（第2部）
- スコープ収束パターン（第3部）
- 二段階AI活用（第3部）
- 精度モードと推論モード（第4部）

でも、「知っている」と「できる」は違います。

---

### パターンで覚える

失敗パターンを知っておくと、
**同じ失敗を繰り返さなくなります**。

「あ、これは『全部一度に頼む』パターンだ」
「これは『二段階AI活用』を使うべき場面だ」

こうやってパターンで認識できると、
適切な対処法がすぐに思い浮かびます。

---

### この章の構成

4つの失敗パターンを、
**Before/After形式**で見ていきます。

```text
【Before/Afterの見方】

❌ Before: よくある失敗
   → なぜダメなのか

✅ After: 改善後のアプローチ
   → なぜうまくいくのか

📚 関連概念: 第X章の○○
```

それでは、1つずつ見ていきましょう。

---

## パターン1：全部一度に頼む → 分けて頼む

最もよくある失敗パターンです。

---

### ❌ Before：全部一度に頼む

```text
【テキスト生成の例】

「リモートワークの生産性について、
 5000字の記事を書いてください。
 読者はマネージャー層です」

AI: (5000字の記事を一気に出力)

結果:
- 全体的に浅い内容
- 構成がイマイチ
- 後半が尻切れトンボ
- 70%の完成度で止まる
```

```text
【コード生成の例】

「ユーザー認証システムを実装してください。
 ログイン、ログアウト、パスワードリセット、
 セッション管理、権限管理を含めて」

AI: (大量のコードを一気に出力)

結果:
- どこかにバグがある
- 全体を把握できない
- 修正箇所がわからない
- 70%の完成度で止まる
```

---

### なぜダメなのか？

**70%問題**が発生します。

大きなタスクを丸投げすると、
AIは「だいたいこんな感じ」という
70%の完成度で止まります。

さらに、**第2部で学んだAIの弱点**も起きます。

即答型AIは中間部分を忘れやすく、
熟考型AIは最初の推論に引きずられます。
どちらでも、大きなタスクは品質低下を招きます。

---

### ✅ After：分けて頼む

```text
【テキスト生成の例】

Step 1: 「リモートワークの生産性について記事を書きたい。
        マネージャー向けに5つの見出しを提案して」

AI: 1. リモートワークの現状と課題
    2. 生産性を測定する方法
    3. コミュニケーションの工夫
    4. 成果物ベースの評価制度
    5. 具体的なツールと運用

Step 2: 「1つ目の見出し『リモートワークの現状と課題』を
        800字程度で書いて」

AI: (800字の本文)

Step 3: 確認 → OK → 次の見出しへ

結果:
- 各セクションが充実
- 構成が一貫
- 品質を確認しながら進められる
- 98%の完成度に到達
```

```text
【コード生成の例】

Step 1: 「ユーザー認証システムを作りたい。
        必要な機能を洗い出して」

AI: 1. ログイン機能
    2. ログアウト機能
    3. パスワードリセット
    4. セッション管理
    5. 権限管理

Step 2: 「まずログイン機能だけ実装して」

AI: (ログイン機能のコード)

Step 3: テスト → 動作確認 → 次の機能へ

結果:
- 各機能が確実に動く
- バグがあってもすぐ特定できる
- 段階的に完成度が上がる
- 98%の完成度に到達
```

---

### 📚 関連概念

- **70%問題**（第1部）：大きく頼むと70%で止まる
- **AIの2つの弱点**（第2部）：中間忘れ・最初依存
- **スコープ収束パターン**（第3部）：分けて渡すと精度が上がる

---

### 分野別の応用

| 分野 | Before | After |
|------|--------|-------|
| テキスト | 「5000字の記事を」 | 「見出し5つ」→「各800字」 |
| コード | 「システム全体を」 | 「機能ごとに」→「テスト」→「次へ」 |
| 画像 | 「完成イメージを」 | 「構図」→「色」→「ディテール」 |
| 企画 | 「事業計画書を」 | 「課題」→「解決策」→「収益モデル」 |

---

## パターン2：曖昧なまま大きく頼む → 要素を分けて具体的に

「いい感じに」「適切に」という
曖昧な指示が引き起こす失敗です。

---

### ❌ Before：曖昧なまま大きく頼む

```text
【画像生成の例】

「いい感じのテック企業のロゴを作って」

AI: (何か作る)

結果:
- 「いい感じ」の解釈がズレる
- 何度やり直しても満足できない
- 「なんか違う」が続く
```

```text
【テキスト生成の例】

「うちのサービスの紹介文を
 いい感じに書いて」

AI: (何か書く)

結果:
- トーンが合わない
- 強調ポイントがズレる
- 「なんか違う」が続く
```

---

### なぜダメなのか？

「いい感じ」は、
**人によって解釈が違います**。

AIにとっての「いい感じ」と、
あなたにとっての「いい感じ」は、
まったく違うかもしれません。

曖昧な指示は、
**AIの弱点を悪化させます**。

AIが「何を重視すべきか」わからないので、
即答型は中間を見落とし、熟考型は最初の推測に引きずられます。
結果的に焦点がぼやけます。

---

### ✅ After：要素を分けて具体的に

```text
【画像生成の例】

Step 1: 要素を分解する
- スタイル：シンプル、ミニマル
- 色：青系、信頼感
- 形状：幾何学的、抽象的
- イメージ：テクノロジー、革新

Step 2: 具体的に頼む
「テック企業のロゴを作って。
 シンプルでミニマルなデザイン。
 青系の配色で信頼感を表現。
 幾何学的な形状。」

結果:
- 要素が明確なので解釈がブレない
- 修正も「色をもう少し濃く」と具体的にできる
```

```text
【テキスト生成の例】

Step 1: 要素を分解する
- ターゲット：20代のエンジニア
- トーン：カジュアル、親しみやすい
- 強調点：使いやすさ、導入の簡単さ
- 長さ：200字程度

Step 2: 具体的に頼む
「うちのサービスの紹介文を書いて。
 ターゲットは20代のエンジニア。
 カジュアルで親しみやすいトーン。
 使いやすさと導入の簡単さを強調。
 200字程度で。」

結果:
- ターゲットに合った文章になる
- 修正も「もう少しカジュアルに」と具体的にできる
```

---

### 📚 関連概念

- **AIの2つの弱点**（第2部）：Lost in the Middle（中間忘却）/ Lost at the Beginning（最初依存）
- **スコープ収束パターン**（第3部）：要素を分解して具体的に

---

### 要素分解のテンプレート

```text
【汎用テンプレート】

■ 誰に向けて？（ターゲット）
■ どんな印象？（トーン・スタイル）
■ 何を強調？（重要なポイント）
■ どのくらい？（量・範囲）
■ 何に使う？（用途・文脈）
```

この5つを埋めるだけで、
「いい感じに」が具体的な指示に変わります。

---

### 分野別の応用

| 分野 | 曖昧な指示 | 具体的な指示 |
|------|-----------|-------------|
| 画像 | 「いい感じのロゴ」 | 「シンプル」「青系」「幾何学的」 |
| テキスト | 「うまく書いて」 | 「ターゲット」「トーン」「強調点」 |
| コード | 「きれいに」 | 「命名規則」「構造」「エラー処理」 |
| 企画 | 「いいアイデア」 | 「制約」「目標」「優先順位」 |

---

## パターン3：AIに直接判断させる → 検証可能な形で出力させる

AIの出力を「そのまま信じてしまう」失敗です。

---

### ❌ Before：AIに直接判断させる

```text
【コードテストの例】

「このコードをテストして、
 バグがあれば教えて」

AI: 「テストしました。
     3つのバグを見つけて修正しました。
     修正後のコードはこちらです」

結果:
- 本当にテストしたのか確認できない
- 「見つけた」と言ってるだけかも
- 修正が正しいのかわからない
```

```text
【文章チェックの例】

「この文章をチェックして、
 おかしいところがあれば直して」

AI: 「チェックしました。
     5箇所修正しました」

結果:
- 何をどう直したのかわからない
- 修正が適切なのか判断できない
```

---

### なぜダメなのか？

AIは「やった」と言うことがあります。
でも、**本当にやったかは確認できません**。

これが **ハルシネーション**（幻覚）です。

AIに「直接やらせる」と、
そのプロセスがブラックボックスになり、
**検証できない**状態になります。

---

### ✅ After：検証可能な形で出力させる

```text
【コードテストの例】

Step 1: テストコードを作らせる
「このコードのテストコードを書いて。
 正常系と異常系を含めて」

AI: (テストコードを出力)

Step 2: 自分でテストを実行する
$ npm test

結果:
- テストが通るか自分で確認できる
- 失敗したら原因がわかる
- AIの「テストした」に頼らない
```

```text
【文章チェックの例】

Step 1: チェックリストを作らせる
「この文章のチェックリストを作って。
 誤字脱字、論理の飛躍、根拠の有無など」

AI: ☐ 誤字脱字がないか
    ☐ 論理の飛躍がないか
    ☐ 主張に根拠があるか
    ☐ 読者にとって分かりやすいか
    ...

Step 2: 自分でチェックを実行する
(チェックリストに沿って確認)

結果:
- 何をチェックすべきか明確
- 自分の目で確認できる
- 見落としを防げる
```

---

### 📚 関連概念

- **AIの2つの弱点**（第2部）：直接判断させると弱点が露呈する
- **二段階AI活用**（第3部）：AIに直接やらせず、ツールを作らせる

---

### 二段階AI活用の3パターン

```text
【パターン1：チェックリスト生成】
AIに → チェックリストを作らせる
自分で → チェックを実行する

【パターン2：テストコード生成】
AIに → テストコードを書かせる
自分で → テストを実行する

【パターン3：評価基準生成】
AIに → 評価基準を作らせる
自分で → 基準に沿って評価する
```

共通点は、
「**AIにやらせる**」を「**AIに作らせる＋自分でやる**」
に変えることです。

---

### 分野別の応用

| 分野 | 直接やらせる | ツールを作らせる |
|------|------------|----------------|
| コード | 「テストして」 | 「テストコードを書いて」 |
| 文章 | 「チェックして」 | 「チェックリストを作って」 |
| 設計 | 「レビューして」 | 「レビュー観点を作って」 |
| データ | 「分析して」 | 「分析クエリを書いて」 |

---

## パターン4：修正を一度に全部頼む → 1つずつ確認しながら

「まとめて直して」が引き起こす混乱です。

---

### ❌ Before：修正を一度に全部頼む

```text
【コード修正の例】

「このコードの問題点を全部直して。
 バグ修正、リファクタリング、
 命名の改善も含めて」

AI: (大量の修正を一気に適用)

結果:
- 何がどう変わったかわからない
- 新しいバグが入ったかもしれない
- 元に戻したい部分が特定できない
- 混乱する
```

```text
【文章修正の例】

「このレポートの問題点を全部直して。
 論理の飛躍、表現の曖昧さ、
 データの不足も含めて」

AI: (大幅に書き換えられた文章)

結果:
- 自分の意図と違う方向に変わった
- どこが変わったかわからない
- 良かった部分まで変わってしまった
```

---

### なぜダメなのか？

複数の修正を一度に行うと、
**変更の追跡ができなくなります**。

また、**スコープが大きくなる**ので、
70%問題も発生します。

1つ1つの修正は正しくても、
組み合わさると矛盾が生じることもあります。

---

### ✅ After：1つずつ確認しながら

```text
【コード修正の例】

Step 1: 問題点を列挙させる
「このコードの問題点を箇条書きで教えて」

AI: 1. 変数名がわかりにくい（line 15）
    2. エラーハンドリングがない（line 23）
    3. 重複コードがある（line 30, 45）
    4. マジックナンバーがある（line 52）

Step 2: 1つずつ修正する
「まず1番目の『変数名がわかりにくい』を直して」

AI: (その修正だけを適用)

Step 3: 確認 → OK → 次の修正へ

結果:
- 各修正を確認できる
- 問題があればすぐ特定できる
- 必要な修正だけ適用できる
```

```text
【文章修正の例】

Step 1: 問題点を列挙させる
「このレポートの改善点を箇条書きで教えて」

AI: 1. 第2段落の論理が飛躍している
    2. 第3段落のデータに出典がない
    3. 結論が唐突
    4. 専門用語の説明がない

Step 2: 1つずつ修正する
「まず1番目の『論理の飛躍』を直して。
 他の部分は変えないで」

AI: (その修正だけを適用)

Step 3: 確認 → OK → 次の修正へ

結果:
- 各修正を確認できる
- 意図しない変更を防げる
- 良い部分は保持できる
```

---

### 📚 関連概念

- **スコープ収束パターン**（第3部）：小さく分けて精度を上げる
- **70%問題**（第1部）：大きくすると70%で止まる

---

### 修正依頼のフロー

```text
【修正の3ステップ】

Step 1: 問題点を列挙させる
「〇〇の問題点を箇条書きで教えて」

Step 2: 1つずつ修正を依頼
「まず1番目の〇〇を直して」

Step 3: 確認してから次へ
確認 → OK → 「次は2番目を」

---

ポイント:
- 「全部直して」ではなく「列挙して」
- 1つずつ確認しながら進める
- 必要ない修正はスキップできる
```

---

### 分野別の応用

| 分野 | まとめて修正 | 1つずつ確認 |
|------|------------|------------|
| コード | 「全部リファクタ」 | 「問題点を列挙」→「1つずつ」 |
| 文章 | 「全体を改善」 | 「改善点を列挙」→「1つずつ」 |
| デザイン | 「全部調整」 | 「調整点を列挙」→「1つずつ」 |
| 企画 | 「全部見直し」 | 「見直し点を列挙」→「1つずつ」 |

---

## パターン選択のフローチャート

どのパターンを使えばいいか迷ったときは、
このフローチャートを参考にしてください。

![パターン選択のフローチャート：タスクが大きい場合はパターン1（分けて頼む）、指示が曖昧な場合はパターン2（要素を分けて具体的に）、検証が必要な場合はパターン3（ツールを作らせる）、修正が複数の場合はパターン4（1つずつ確認）、それ以外はそのまま頼んでOK](./06_pattern_selection_flowchart.png)

---

### 複数パターンの組み合わせ

実際には、複数のパターンを
組み合わせることも多いです。

```text
【組み合わせ例1】
パターン1 + パターン3

大きなタスクを分けて（パターン1）、
各ステップでテストコードを作らせる（パターン3）

例：「認証システムを作る」
→ 機能ごとに分ける（パターン1）
→ 各機能でテストコードを書かせる（パターン3）
```

```text
【組み合わせ例2】
パターン2 + パターン4

曖昧な指示を具体的にして（パターン2）、
修正は1つずつ確認する（パターン4）

例：「いい感じのレポートにして」
→ 要素を分解して具体的に（パターン2）
→ 改善点を1つずつ適用（パターン4）
```

---

## 章末チェックリスト

この章の内容を実践に移すためのチェックリスト:

- [ ] 次に大きなタスクを頼むとき、まず「分ける」ことを考える
- [ ] 「いい感じに」と頼みたくなったら、要素を分解する
- [ ] AIに「チェックして」と頼む代わりに「チェックリストを作って」と頼む
- [ ] 修正を頼むときは「列挙して」→「1つずつ」の流れを試す

---

<div class="column-box">

### 📸 コラム：ビフォーアフター写真の力

リフォーム番組を見たことがありますか？「ビフォー」の古い部屋を見せてから、「アフター」の美しい部屋を見せますよね。

AIも同じです。「全部直して」と言われるより、「ビフォー（これが悪い例）」と「アフター（こうしたい）」を見せてもらうと、何をすればいいかがハッキリします。

失敗パターンを教えることは、「こんな風にはならないでね」という道しるべになるのです。

**AI侍**: 「人間も『良い例』だけより、『悪い例』も見た方が理解が深まる。AIも同じことじゃ」  
**DJ町娘**: 「失敗を隠さず見せることが、実は一番の近道なんですね✨」

</div>

---

## 次部への橋渡し

ここまでで、AIを使いこなすための
基本的な考え方と実践パターンを学びました。

**第1部〜第4部：基本概念**
- 70%問題、AIの2つの弱点（中間忘れ・最初依存）
- スコープ収束パターン、二段階AI活用
- 精度モードと推論モード

**第5部：実践パターン**
- 4つの失敗パターンと対処法
- Before/After形式での具体例

次部では、これらの知識を
**実際の開発環境でどう活かすか**を見ていきます。

VSCodeを使った実践的なファイル分割の技術、
AIに効果的に渡すためのコツを学びましょう。
