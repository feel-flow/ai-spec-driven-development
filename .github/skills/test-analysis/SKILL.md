---
name: test-analysis
description: テスト品質を動作カバレッジの観点から分析し、クリティカルなテストギャップを特定する。テストファイルの追加・変更時に使用。
---

# Test Analysis スキル

## 目的

動作カバレッジの観点からテスト品質を分析し、クリティカルなギャップを特定する。

## 識別対象のギャップ

### 1. テストされていないエラーハンドリングパス

- try-catchブロック内のエラー処理
- API呼び出し失敗時の動作
- バリデーションエラー

### 2. 境界条件のエッジケース

- 空の入力、null/undefined
- 最大値/最小値
- 空配列/空オブジェクト

### 3. クリティカルなビジネスロジック分岐

- 条件分岐の各パス
- 状態遷移
- 権限チェック

### 4. ネガティブテストケース

- 不正な入力
- 予期しない型
- セキュリティ境界

### 5. 非同期/並行処理

- レースコンディション
- タイムアウト処理
- 並列実行

## 優先度スケール

| 優先度 | 意味 | 例 |
|--------|------|------|
| 9-10 | クリティカル | データ損失、セキュリティ、システム障害の可能性 |
| 7-8 | 重要 | ユーザー向けエラーの可能性 |
| 5-6 | エッジケース | 混乱や軽微な問題 |
| 3-4 | Nice-to-have | 完全性のため |
| 1-2 | オプショナル | 改善の余地 |

**報告対象: 優先度7以上**

## 出力形式

```markdown
# Test Analysis Results

## Critical Gaps (優先度 9-10)

### [機能/関数名]

- ファイル: path/to/file.ts
- テストされていない動作: エラー時のリトライロジック
- リスク: データ損失の可能性
- 優先度: 10
- 推奨テストケース:
  - エラー発生時にリトライが実行されることを確認
  - 最大リトライ回数後にエラーがスローされることを確認

## Important Gaps (優先度 7-8)

...

## Summary

- Critical Gaps: X
- Important Gaps: X
```

## 注意事項

- 行カバレッジではなく動作カバレッジに焦点
- 変更されたコードに関連するテストを優先
- 具体的なテストケースを提案
- 優先度7以上のギャップを重点的に報告
